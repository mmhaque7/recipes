---
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";

export interface Props {
  title: string;
  description?: string;
  heroImage?: string;
  slug: string;
  prepTimeMins?: number;
  cookTimeMins?: number;
  totalTimeMins?: number;
  servings?: number;
}

const {
  title,
  description,
  heroImage,
  slug,
  prepTimeMins,
  cookTimeMins,
  totalTimeMins,
  servings,
} = Astro.props;

// calculate total time
const total = totalTimeMins ?? (prepTimeMins ?? 0) + (cookTimeMins ?? 0);
---

<Card class="overflow-hidden hover:shadow-lg transition-shadow">
  <CardContent class="p-0">
    {
      heroImage && (
        <img
          src={heroImage}
          alt={title}
          class="w-full h-48 object-cover"
          loading="lazy"
        />
      )
    }

    <div class="p-4">
      <h3 class="text-lg font-semibold mb-1">{title}</h3>
      {
        description && (
          <p class="text-sm text-gray-600 line-clamp-2 mb-3">{description}</p>
        )
      }

      <div class="text-xs text-gray-500 mb-4 flex justify-between">
        {servings && <span>üçΩ {servings} servings</span>}
        {total > 0 && <span>‚è± {total} mins</span>}
      </div>

      <Button asChild class="w-full">
        <a href={`/recipes/${slug}/`}>View Recipe</a>
      </Button>
    </div>
  </CardContent>
</Card>
