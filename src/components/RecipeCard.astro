---
import { Card, CardContent } from "@/components/ui/card";
import { Button } from "@/components/ui/button";

export interface Props {
  title: string;
  description?: string;
  heroImage?: string;
  slug: string;
  prepTimeMins?: number;
  cookTimeMins?: number;
  totalTimeMins?: number;
  servings?: number;
}

const {
  title,
  description,
  heroImage,
  slug,
  prepTimeMins,
  cookTimeMins,
  totalTimeMins,
  servings,
} = Astro.props;

const total = totalTimeMins ?? (prepTimeMins ?? 0) + (cookTimeMins ?? 0);
---

<Card class="card overflow-hidden">
  <CardContent class="p-0">
    {
      heroImage && (
        <img
          src={heroImage}
          alt={title}
          loading="lazy"
          decoding="async"
          class="w-full object-cover aspect-[16/9]"
        />
      )
    }

    <div class="card-body">
      <h3 class="text-base font-semibold tracking-tight">{title}</h3>

      {
        description && (
          <p class="mt-2 text-sm text-muted-foreground line-clamp-2">
            {description}
          </p>
        )
      }

      <div
        class="mt-3 flex items-center justify-between text-xs text-muted-foreground"
      >
        {servings && <span>üçΩ {servings} servings</span>}
        {total > 0 && <span>‚è± {total} mins</span>}
      </div>

      <Button asChild class="mt-4 w-full">
        <a href={`/recipes/${slug}/`}>View Recipe</a>
      </Button>
    </div>
  </CardContent>
</Card>
